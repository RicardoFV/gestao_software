-- criando as tabelas 

CREATE TABLE USUARIOS
(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY, 
    NOME VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(200) NOT NULL UNIQUE, 
    SENHA VARCHAR2(200),
    PERFIL_ACESSO VARCHAR2(150),
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL, 
    SITUACAO NUMBER(1)
);

CREATE TABLE AUTENTICAR
(
ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY, 
ID_USUARIO INTEGER NOT NULL,
SESSAO INTEGER NOT NULL,
DT_LOGIN DATE NOT NULL,
DT_LOGOF DATE NOT NULL,
CONSTRAINT FK_USUARIOS_AUTENTICAR FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID)
)


CREATE TABLE VERSAO 
(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY, 
    NOME VARCHAR(255) NOT NULL,
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL,
    ID_USUARIO INTEGER NOT NULL,
    CONSTRAINT FK_USUARIOS_VERSAO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID)
);

CREATE TABLE SISTEMAS 
(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR(255) NOT NULL,
    IMAGEM VARCHAR(250), 
    DESCRICAO VARCHAR2(500), 
    ID_VERSAO INTEGER NOT NULL, 
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL, 
    ID_USUARIO INTEGER NOT NULL, 
    CONSTRAINT FK_USUARIOS_SISTEMAS FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID),
    CONSTRAINT FK_SISTEMAS_VERSAO FOREIGN KEY(ID_VERSAO) REFERENCES VERSAO(ID)
);


CREATE TABLE REQUISITOS 
(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR(255) NOT NULL,
    DESCRICAO VARCHAR2(500), 
    TIPO_REQUISITO VARCHAR2(200), 
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL, 
    ID_USUARIO INTEGER NOT NULL, 
    CONSTRAINT FK_USUARIOS_REQUISITOS FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID) 
);

CREATE TABLE TRATAMENTO 
(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(300), 
    STATUS VARCHAR2(150),
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL,
    DT_ENTREGA DATE NOT NULL,
    ID_SISTEMA INTEGER NOT NULL, 
    ID_USUARIO INTEGER NOT NULL, 
    CONSTRAINT FK_USUARIOS_TRATAMENTO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID),
    CONSTRAINT FK_SISTEMA_TRATAMENTO FOREIGN KEY(ID_SISTEMA) REFERENCES SISTEMAS(ID) 
);

-- TABELA LOGS

CREATE TABLE LOGS_CADASTRO
(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(300), 
    ID_USUARIO INTEGER NOT NULL, 
    DT_INCLUSAO DATE NOT NULL,
    CONSTRAINT FK_USUARIOS_LOGS_CADASTRO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID)
);

-- inserindo mais um campo
-- ALTER TABLE USUARIOS ADD PERFIL_ACESSO VARCHAR2(150);

-- deletando uma culuna
  --ALTER TABLE REQUISITOS drop column atividade;
  
  -- excluidn o nome da tabela
  --ALTER TABLE TRATAMENTO drop column situacao; 
  
  -- inserindo mais um campo
 --ALTER TABLE TRATAMENTO ADD nome VARCHAR2(300);

--ALTER TABLE TRATAMENTO ADD STATUS VARCHAR2(150);
--ALTER TABLE USUARIOS ADD SENHA VARCHAR2(200);

COMMIT;



*************SQL MYSQL **********************88

CREATE TABLE USUARIOS
(
    ID INTEGER AUTO_INCREMENT PRIMARY KEY, 
    NOME VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(200) NOT NULL UNIQUE, 
    SENHA VARCHAR(200),
    PERFIL_ACESSO VARCHAR(150),
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL, 
    SITUACAO VARCHAR(8)
);

CREATE TABLE AUTENTICAR
(
ID INTEGER AUTO_INCREMENT PRIMARY KEY,
ID_USUARIO INTEGER NOT NULL,
SESSAO INTEGER NOT NULL,
DT_LOGIN DATE NOT NULL,
DT_LOGOF DATE NOT NULL,
CONSTRAINT FK_USUARIOS_AUTENTICAR FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID)
);


CREATE TABLE VERSAO 
(
    ID INTEGER AUTO_INCREMENT PRIMARY KEY, 
    NOME VARCHAR(255) NOT NULL,
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL,
    ID_USUARIO INTEGER NOT NULL,
    CONSTRAINT FK_USUARIOS_VERSAO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID)
);

CREATE TABLE SISTEMAS 
(
    ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(255) NOT NULL,
    IMAGEM VARCHAR(250), 
    DESCRICAO VARCHAR(500), 
    ID_VERSAO INTEGER NOT NULL, 
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL, 
    ID_USUARIO INTEGER NOT NULL, 
    CONSTRAINT FK_USUARIOS_SISTEMAS FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID),
    CONSTRAINT FK_SISTEMAS_VERSAO FOREIGN KEY(ID_VERSAO) REFERENCES VERSAO(ID)
);


CREATE TABLE REQUISITOS 
(
    ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(255) NOT NULL,
    DESCRICAO VARCHAR(500), 
    TIPO_REQUISITO VARCHAR(200), 
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL, 
    ID_USUARIO INTEGER NOT NULL, 
    CONSTRAINT FK_USUARIOS_REQUISITOS FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID) 
);

CREATE TABLE TRATAMENTO 
(
    ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(300), 
    STATUS VARCHAR(150),
    DT_INCLUSAO DATE NOT NULL, 
    DT_ALTERACAO DATE NOT NULL,
    DT_ENTREGA DATE NOT NULL,
    ID_SISTEMA INTEGER NOT NULL, 
    ID_USUARIO INTEGER NOT NULL, 
    CONSTRAINT FK_USUARIOS_TRATAMENTO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID),
    CONSTRAINT FK_SISTEMA_TRATAMENTO FOREIGN KEY(ID_SISTEMA) REFERENCES SISTEMAS(ID) 
);

-- TABELA LOGS

CREATE TABLE LOGS_CADASTRO
(
    ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(300), 
    ID_USUARIO INTEGER NOT NULL, 
    DT_INCLUSAO DATE NOT NULL,
    CONSTRAINT FK_USUARIOS_LOGS_CADASTRO FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS(ID)
);









